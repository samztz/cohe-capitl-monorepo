# ============================================
# Production Environment Configuration
# Cohe Capital Insurance Platform
# ============================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env.production on your production server
#    cp .env.production.example .env.production
#
# 2. Fill in ALL values with PRODUCTION-GRADE secrets
#    ⚠️  DO NOT use the default/example values!
#    ⚠️  DO NOT commit .env.production to version control!
#
# 3. Generate strong random secrets (256-bit recommended):
#    macOS/Linux: openssl rand -base64 32
#    Or: https://generate-secret.vercel.app/32
#
# 4. Deploy with production mode:
#    ./deploy.sh --prod
#    Or: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
#
# ============================================

# ============================================
# Docker & Infrastructure
# ============================================

# Node.js version for Docker images (use LTS version)
NODE_VERSION=20-alpine

# Network configuration
DOCKER_SUBNET=172.20.0.0/16

# ============================================
# Database Configuration (PostgreSQL)
# ============================================

# Database credentials
# SECURITY: Use strong passwords in production
POSTGRES_USER=cohe_user
POSTGRES_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD
POSTGRES_DB=cohe_capital

# Database port (default: 5432)
# WARNING: Do not expose to internet in production
DB_PORT=5432

# Database connection string (constructed from above)
# Used by API service
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@db:5432/${POSTGRES_DB}

# Database volume path (for data persistence)
DB_DATA_PATH=./docker-volumes/db-data

# Optional: Database performance tuning
# POSTGRES_SHARED_BUFFERS=256MB
# POSTGRES_MAX_CONNECTIONS=100

# ============================================
# API Service (NestJS Backend)
# ============================================

# API server port
API_PORT=3001

# API prefix for routes (e.g., /api/policies)
API_PREFIX=api

# JWT Authentication
# SECURITY: Generate secure random strings for production
# Use: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET_32_CHARS_MIN
JWT_EXPIRATION=15m
JWT_REFRESH_SECRET=CHANGE_ME_GENERATE_DIFFERENT_SECRET_32_CHARS_MIN
JWT_REFRESH_EXPIRATION=7d

# SIWE (Sign-In with Ethereum) Configuration
# Replace with your actual domain
SIWE_DOMAIN=your-domain.com
SIWE_URI=https://your-domain.com

# Admin authentication token
# SECURITY: Generate a strong random token
# Use: openssl rand -hex 32
ADMIN_TOKEN=CHANGE_ME_GENERATE_ADMIN_TOKEN

# File storage configuration
SIGNATURE_STORAGE_DIR=uploads/signatures

# CORS configuration
# SECURITY: Set to specific domains in production
# Example: https://your-domain.com,https://admin.your-domain.com
CORS_ORIGIN=*

# Uploads volume path
UPLOADS_PATH=./docker-volumes/uploads

# ============================================
# Web Service (Next.js User Frontend)
# ============================================

# Web server port
WEB_PORT=3000

# API endpoint (accessed by browser, same-domain via nginx)
NEXT_PUBLIC_API_BASE=/api

# WalletConnect/Reown AppKit Project ID
# Get from: https://cloud.reown.com/
# Variable name matches apps/web/src/config/appkit.ts
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=YOUR_PROJECT_ID_HERE

# Blockchain configuration
# BSC Testnet = 97, BSC Mainnet = 56
NEXT_PUBLIC_CHAIN_ID=97
NEXT_PUBLIC_CHAIN_NAME=BSC Testnet

# App metadata
NEXT_PUBLIC_APP_NAME=Cohe Capital
NEXT_PUBLIC_APP_DESCRIPTION=Web3 Insurance Platform

# ============================================
# Admin Service (Next.js Admin Panel)
# ============================================

# Admin server port
ADMIN_PORT=3002

# API endpoint for admin (same-domain via nginx)
NEXT_PUBLIC_ADMIN_API_BASE=/api

# ============================================
# Nginx Reverse Proxy
# ============================================

# Nginx HTTP port (standard: 80)
NGINX_HTTP_PORT=80

# Nginx HTTPS port (standard: 443)
# Uncomment when SSL certificates are configured
# NGINX_HTTPS_PORT=443

# Domain name for SSL certificate
# DOMAIN_NAME=your-domain.com

# ============================================
# Optional: External Services
# ============================================

# Blockchain RPC endpoints
# Use your own RPC or services like Infura, Alchemy, QuickNode
# BSC_MAINNET_RPC_URL=https://bsc-dataseed.binance.org/
# BSC_TESTNET_RPC_URL=https://data-seed-prebsc-1-s1.binance.org:8545/

# Block explorer API keys (for verification, etc.)
# BSCSCAN_API_KEY=YOUR_BSCSCAN_API_KEY_HERE

# Logging services (optional)
# SENTRY_DSN=https://your-sentry-dsn
# LOG_LEVEL=info

# Email service (for notifications, optional)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-email@example.com
# SMTP_PASSWORD=your-smtp-password
# SMTP_FROM=noreply@your-domain.com

# Cloud storage (for production file uploads)
# Replace local storage with S3/R2/OBS in production
# AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=your-bucket-name

# Redis (for caching, sessions, optional)
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password

# ============================================
# Development/Debug Settings
# ============================================

# Enable debug mode (disable in production)
# DEBUG=false

# Enable Prisma Studio (database GUI, disable in production)
# ENABLE_PRISMA_STUDIO=false

# ============================================
# Security Checklist (Before Production)
# ============================================
#
# [ ] Changed all default passwords and secrets
# [ ] Generated secure random tokens (32+ characters)
# [ ] Set CORS_ORIGIN to specific domains
# [ ] Configured SSL/TLS certificates
# [ ] Disabled database port exposure (DB_PORT mapping)
# [ ] Set up backup strategy for database
# [ ] Configured log aggregation and monitoring
# [ ] Set up firewall rules on server
# [ ] Enabled HTTPS redirect in nginx
# [ ] Tested disaster recovery process
# [ ] Documented all environment variables
#
# ============================================
