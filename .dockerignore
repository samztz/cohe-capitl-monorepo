# ============================================
# .dockerignore - Exclude files from Docker context
# Reduces build context size and improves build performance
# ============================================

# CRITICAL: Include pnpm files first (highest priority)
!pnpm-lock.yaml
!pnpm-workspace.yaml
!package.json

# Git and version control
.git
.gitignore
.gitattributes

# Node.js dependencies (will be installed in container)
node_modules
**/node_modules

# Build outputs (will be built in container)
dist
build
.next
out
.turbo
**/.next
**/dist
**/build
**/out

# Environment files (should be injected at runtime)
.env
.env.*
!.env.example
**/.env
**/.env.*
!**/.env.example

# Development files
.vscode
.idea
*.swp
*.swo
*~
.DS_Store
Thumbs.db

# Logs (exclude log files but NOT pnpm-lock.yaml)
logs/
**/logs/
npm-debug.log
yarn-error.log
pnpm-debug.log
**/*.log
!pnpm-lock.yaml
pids
*.pid
*.seed
*.pid.lock

# Test coverage and test outputs
coverage
.nyc_output
**/.nyc_output
**/coverage

# Temporary files
tmp
temp
.cache
**/.cache
**/tmp
**/temp

# Documentation (not needed in runtime)
README.md
CHANGELOG.md
docs
**/*.md
!apps/*/README.md

# CI/CD files
.github
.gitlab-ci.yml
.travis.yml
azure-pipelines.yml
Jenkinsfile

# Docker files (avoid recursive copies)
Dockerfile
docker-compose.yml
docker-compose.*.yml
.dockerignore

# Prisma schema and migrations (needed for migrations in production)
# Note: We need both schema.prisma and migrations/ for prisma migrate deploy
# apps/api/prisma/migrations  # Commented out - migrations needed for production
!apps/api/prisma/schema.prisma

# Uploads and user-generated content (should be in volumes)
uploads
**/uploads

# OS-specific files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Desktop.ini
$RECYCLE.BIN/

# IDE and editor files
.vscode/
.idea/
*.sublime-project
*.sublime-workspace
*.code-workspace

# Test files (optional - remove if you want to run tests in container)
**/*.test.ts
**/*.test.tsx
**/*.spec.ts
**/*.spec.tsx
**/test/
**/__tests__/

# Scripts (not needed in production containers, but keep infra/)
scripts/

# Keep infra/ for Nginx configuration (needed by docker-compose.prod.yml)
# infra/ is mounted as volume, not copied into images

# Lock files for other package managers (we use pnpm)
package-lock.json
yarn.lock
